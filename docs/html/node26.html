<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2018 (Released Feb 1, 2018) -->
<HTML>
<HEAD>
<TITLE>Sparse Matrix class</TITLE>
<META NAME="description" CONTENT="Sparse Matrix class">
<META NAME="keywords" CONTENT="userhtml">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2018">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="userhtml.css">

<LINK REL="next" HREF="node46.html">
<LINK REL="previous" HREF="node10.html">
<LINK REL="up" HREF="node9.html">
<LINK REL="next" HREF="node27.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html564"
  HREF="node27.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html560"
  HREF="node9.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html554"
  HREF="node25.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html562"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html565"
  HREF="node27.html">Sparse Matrix Methods</A>
<B> Up:</B> <A NAME="tex2html561"
  HREF="node9.html">Data Structures and Classes</A>
<B> Previous:</B> <A NAME="tex2html555"
  HREF="node25.html">Named Constants</A>
 &nbsp; <B>  <A NAME="tex2html563"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00042000000000000000"></A>
<A NAME="sec:spmat"></A>
<BR>
Sparse Matrix class
</H2>
The spdata<TT>psb_Tspmat_type</TT> class
contains all information about the local portion of the sparse matrix and   
its storage mode. Its design is 
based on the STATE design pattern&nbsp;[<A
 HREF="node137.html#DesignPatterns">13</A>] as detailed
in&nbsp;[<A
 HREF="node137.html#Sparse03">11</A>]; the type declaration is shown in
figure&nbsp;<A HREF="#fig:spmattype">4</A> where <code>T</code> is a placeholder for the
data type and precision variants 
<DL>
<DT><STRONG>S</STRONG></DT>
<DD>Single precision real;
</DD>
<DT><STRONG>D</STRONG></DT>
<DD>Double precision real;
</DD>
<DT><STRONG>C</STRONG></DT>
<DD>Single precision complex;
</DD>
<DT><STRONG>Z</STRONG></DT>
<DD>Double precision complex.
</DD>
</DL>
The actual data is contained in the polymorphic component <code>a%a</code>
of type  spbasedata<TT>psb_T_base_sparse_mat</TT>; its
specific layout can be chosen dynamically among the predefined types,
or an entirely new storage layout can be implemented and passed to the
library at runtime via the <code>psb_spasb</code> routine. 

<DIV ALIGN="CENTER"><A NAME="fig:spmattype"></A><A NAME="969"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 4:</STRONG>
    The PSBLAS defined data type that
    contains a sparse matrix.</CAPTION>
<TR><TD><DIV ALIGN="CENTER">
</DIV><TABLE  WIDTH="85%">
<TR><TD>
<PRE>
  type :: psb_Tspmat_type
    class(psb_T_base_sparse_mat), allocatable  :: a 
  end type  psb_Tspmat_type
</PRE></TD></TR>
</TABLE>
<DIV ALIGN="CENTER">
</DIV></TD></TR>
</TABLE>
</DIV>
The following very common formats are precompiled in  PSBLAS and thus
are always available: 
<DL>
<DT><STRONG>psb_T_coo_sparse_mat</STRONG></DT>
<DD>Coordinate storage; 
</DD>
<DT><STRONG>psb_T_csr_sparse_mat</STRONG></DT>
<DD>Compressed storage by rows; 
</DD>
<DT><STRONG>psb_T_csc_sparse_mat</STRONG></DT>
<DD>Compressed storage by columns; 
</DD>
</DL>
The inner sparse matrix has an associated state, which can take the
following values:
<DL>
<DT><STRONG>Build:</STRONG></DT>
<DD>State entered after the first allocation, and before the
  first assembly; in this state it is possible to add nonzero entries.
</DD>
<DT><STRONG>Assembled:</STRONG></DT>
<DD>State entered after the assembly; computations using
  the sparse matrix, such as matrix-vector products, are only possible
  in this state;
</DD>
<DT><STRONG>Update:</STRONG></DT>
<DD>State entered after a reinitalization; this is used to
  handle applications in which the same sparsity pattern is used
  multiple times with different coefficients. In this state it is only
  possible to enter coefficients for already existing nonzero entries.
</DD>
</DL>
The only storage variant supporting the build state is COO; all other
variants are obtained by conversion to/from it. 

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html566"
  HREF="node27.html">Sparse Matrix Methods</A>
<LI><A NAME="tex2html567"
  HREF="node28.html">get_nrows -- Get number of  rows in a sparse  matrix</A>
<LI><A NAME="tex2html568"
  HREF="node29.html">get_ncols -- Get number of  columns in a  sparse
  matrix</A>
<LI><A NAME="tex2html569"
  HREF="node30.html">get_nnzeros -- Get number of nonzero elements
  in a sparse matrix</A>
<LI><A NAME="tex2html570"
  HREF="node31.html">get_size  -- Get maximum number of nonzero elements
  in a sparse matrix</A>
<LI><A NAME="tex2html571"
  HREF="node32.html">sizeof  -- Get memory occupation in bytes
of  a sparse matrix</A>
<LI><A NAME="tex2html572"
  HREF="node33.html">get_fmt  -- Short description of the dynamic type</A>
<LI><A NAME="tex2html573"
  HREF="node34.html">is_bld, is_upd, is_asb  -- Status check</A>
<LI><A NAME="tex2html574"
  HREF="node35.html">is_lower, is_upper, is_triangle, is_unit  --
  Format  check</A>
<LI><A NAME="tex2html575"
  HREF="node36.html">cscnv -- Convert to a different storage format</A>
<LI><A NAME="tex2html576"
  HREF="node37.html">csclip -- Reduce to a submatrix</A>
<LI><A NAME="tex2html577"
  HREF="node38.html">clean_zeros -- Eliminate zero coefficients</A>
<LI><A NAME="tex2html578"
  HREF="node39.html">get_diag -- Get main diagonal</A>
<LI><A NAME="tex2html579"
  HREF="node40.html">clip_diag -- Cut out main diagonal</A>
<LI><A NAME="tex2html580"
  HREF="node41.html">tril -- Return the lower triangle</A>
<LI><A NAME="tex2html581"
  HREF="node42.html">triu -- Return the upper triangle</A>
<LI><A NAME="tex2html582"
  HREF="node43.html">psb_set_mat_default -- Set default  storage format</A>
<LI><A NAME="tex2html583"
  HREF="node44.html">clone -- Clone current object</A>
<LI><A NAME="tex2html584"
  HREF="node45.html">Named Constants</A>
</UL>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html564"
  HREF="node27.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html560"
  HREF="node9.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html554"
  HREF="node25.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html562"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html565"
  HREF="node27.html">Sparse Matrix Methods</A>
<B> Up:</B> <A NAME="tex2html561"
  HREF="node9.html">Data Structures and Classes</A>
<B> Previous:</B> <A NAME="tex2html555"
  HREF="node25.html">Named Constants</A>
 &nbsp; <B>  <A NAME="tex2html563"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
